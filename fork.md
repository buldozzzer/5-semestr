# Fork Bomb #

fork-бомба — вредоносная или ошибочно написанная программа, бесконечно создающая свои копии (системным вызовом fork()), которые обычно также начинают создавать свои копии и т. д.

Выполнение такой программы может вызывать большую нагрузку вычислительной системы или даже зависание системы вследствие нехватки системных ресурсов (дескрипторов процессов, памяти, процессорного времени), что и является целью.

fork-бомбу очень трудно ликвидировать, т.к. один процесс не зависит от другого и помогает только лишь перезагрузка компьютера. Но иногда она попадает и в автозагрузку (если это указано в коде) и тогда для ее ликвидации необходимо загружаться в режиме защиты от сбоев (безопасном режиме в Windows). Но некоторые форк-бомбы можно уничтожить и без перезагрузки.

### Примеры создания  Fork Bomb ###

Итак, код выглядит так:

	:(){ :|:& };:

Где:
   *	:() — Определение функции.
   *	{  — Открытие функции.
   *    : — загрузка копии функции «:» в память
   *    |: — перенаправление вывода в следующую копию функции
   *	& — Помещает вызов функции в фоновом режиме, чтобы fork (дочерний процесс) не мог «умереть» вообще, тем самым это начнет есть системные ресурсы.
   *	} — Закрытие функции.
   *	; — Завершите определение функции. Т.е является разделителем команд, (командный сепаратор).
   *	: — Запускает функцию которая порождает fork bomb().
	 
Это рабочий код, но не очень читабельный. Вот пример нормального, читаемого кода:
	 
	 #!/bin/bash
	 bomb() {
	 bomb | bomb &
	 };
	 bomb
   
   Для уничтожения такой бомбы применяется ограничение колличества одновременно работающих процессов и тогда один из процессов fork-бомбы будет завершаться и на месте его будет создаваться другой процесс при достижении максимального колличества.
   
   Иная ситуация с ОС Windows, так как там нельзя ограничить колличество одновременно работающих процессов и вредоносная программа работает до полного исчерпания оперативной памяти и процессорного времени.

Для ОС Windows простая форк бомба выглядит так :

     :a
     start %0
     goto a

Здесь она работает аналогично :

   *   :a — описание цикла «a»
   *   start %0 — запускает копию программы
   *   goto a — зацикливает «a» и запускает цепную реакцию

Её, конечно, можно ликвидировать без перезагрузки, но действовать необходимо оперативно, пока не кончилась оперативная память.

Ликвидируется она так :

	taskkill /F /IM conhost.exe
	taskkill /F /IM cmd.exe
	
Здесь программа taskkill завершает процессы cmd.exe и conhost.exe которые вызвала данная форк-бомба и тем самым разгружает процессор и оперативную память, но иногда она может не помочь, когда уже оперативная память заполнена и процессорного времени не хватает, и тогда уж помогает только перезагрузка компьютера.

Существуют Fork-бомбы и на языках программирования, приведу некоторые из них :

### Пример создания  Fork Bomb с использованием perl ###

	# perl -e "fork while fork" &

### Пример создания  Fork Bomb с использованием C/C++ ###

	#include <unistd.h>
	int main(void)
	{
		while(1)
		fork();
	}

И все-таки fork-бомбы на каких они языках программирования не написаны действуют по одному принципу.

## Ограничение процессов, создаваемых пользователем ##

Избегайте использования Fork в любом, выражении, которое может оказаться в бесконечном цикле.
Можно ограничить процесс разветвления, как показано ниже:

	sudo nano /etc/security/limits.conf
	
Отредактируйте файл как:

	 #user_name hard nproc 10
	 
теперь *user_name* может создать 10 процессов.

Или ограничьте количество процессов пользователя с помощью утилиты:

	ulimit -u count_of_process
	
Проверьте результат:

	ulimit -a

Необходимо отметить, что ограничение количества процессов само по себе не предотвращает запуск fork-бомбы, а лишь направлено на минимизацию возможного вреда в случае её срабатывания.
